# –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –¥–ª—è –ò–ò –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å AggreGate

## üéØ –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ: –í–°–ï–ì–î–ê —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è

### –ü—Ä–∞–≤–∏–ª–æ 1: –°–æ–∑–¥–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ = –°–æ–∑–¥–∞–Ω–∏–µ + –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ + –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

**–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:**
```
1. aggregate_create_function(...)
2. –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∑–∞–¥–∞–Ω–∏—é
```

**–ü–†–ê–í–ò–õ–¨–ù–û:**
```
1. aggregate_build_expression() - –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
2. aggregate_validate_expression() - –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
3. aggregate_create_function() - —Å–æ–∑–¥–∞–Ω–∏–µ
4. aggregate_list_functions() - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è
5. aggregate_test_function() - –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
6. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞:
   - aggregate_explain_error() - –ø–æ–Ω—è—Ç—å –ø—Ä–æ–±–ª–µ–º—É
   - aggregate_fix_function_parameters() - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
   - –ò–ª–∏ aggregate_build_expression() - –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏
   - –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Ç–µ—Å—Ç
7. –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ - –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∑–∞–¥–∞–Ω–∏—é
```

### –ü—Ä–∞–≤–∏–ª–æ 0: –†–∞–±–æ—Ç–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ = –û–ø–∏—Å–∞–Ω–∏–µ + –ò–∑—É—á–µ–Ω–∏–µ + –£—Å—Ç–∞–Ω–æ–≤–∫–∞

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ü–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –ª—é–±–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤—Å–µ–≥–¥–∞ –ø–æ–ª—É—á–∞–π—Ç–µ –µ—ë –æ–ø–∏—Å–∞–Ω–∏–µ!**

**–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï —à–∞–≥–∏:**
```
1. aggregate_describe_variable(path, variableName) - –ø–æ–ª—É—á–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
2. –ò–∑—É—á–∏—Ç—å fields[] - –≤—Å–µ –ø–æ–ª—è —Å –∏—Ö –æ–ø–∏—Å–∞–Ω–∏—è–º–∏
3. –ò–∑—É—á–∏—Ç—å aiGuidance - —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (requiredFields, optionalFields)
4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø–∏—Å–∞–Ω–∏—è –ø–æ–ª–µ–π –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
5. –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ - aggregate_set_variable_field –∏–ª–∏ aggregate_set_variable
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:**
- –û–ø–∏—Å–∞–Ω–∏—è –ø–æ–ª–µ–π (`fields[].description`) –æ–±—ä—è—Å–Ω—è—é—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è
- –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö (`fields[].typeName`) –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, –∫–∞–∫–æ–π —Ç–∏–ø –∑–Ω–∞—á–µ–Ω–∏—è –æ–∂–∏–¥–∞–µ—Ç—Å—è
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è (`aiGuidance.requiredFields`) –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
- Nullable –ø–æ–ª—è (`fields[].nullable`) –º–æ–≥—É—Ç –±—ã—Ç—å null

### –ü—Ä–∞–≤–∏–ª–æ 2: –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ = –°–æ–∑–¥–∞–Ω–∏–µ + –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ + –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ + –ü—Ä–∏–≤—è–∑–∫–∏

**–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï —à–∞–≥–∏:**
```
1. aggregate_create_context() - —Å–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏
2. aggregate_get_context() - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è
3. –û–ü–†–ï–î–ï–õ–ò–¢–¨ –¢–ò–ü –ú–û–î–ï–õ–ò:
   - –ê–±—Å–æ–ª—é—Ç–Ω–∞—è (type=0): –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
   - –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è (type=1): –¥–ª—è —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –æ—Ç –æ–±—ä–µ–∫—Ç–æ–≤
   - –≠–∫–∑–µ–º–ø–ª—è—Ä–Ω–∞—è (type=2): –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
4. –ï—Å–ª–∏ –û–¢–ù–û–°–ò–¢–ï–õ–¨–ù–ê–Ø –º–æ–¥–µ–ª—å:
   - aggregate_set_variable_field(path, "childInfo", "containerType", "devices")
   - aggregate_set_variable_field(path, "childInfo", "objectType", "device")
5. aggregate_create_variable() - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
6. aggregate_list_variables() - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
7. aggregate_create_event() - —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
8. aggregate_list_events() - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–±—ã—Ç–∏–π
9. aggregate_create_function() - —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π
10. aggregate_list_functions() - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π
11. –ï—Å–ª–∏ –º–æ–¥–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º:
    - aggregate_get_variable(path, "bindings") - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–≤—è–∑–∫–∏
    - –ï—Å–ª–∏ –ø—Ä–∏–≤—è–∑–æ–∫ –Ω–µ—Ç - aggregate_set_variable() –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è bindings
    - –í–ê–ñ–ù–û: –¥–ª—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å {.:var}, –¥–ª—è –∞–±—Å–æ–ª—é—Ç–Ω–æ–π - {context:var}
```

### –ü—Ä–∞–≤–∏–ª–æ 3: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ Expression —Ñ—É–Ω–∫—Ü–∏–π

**–ö–æ–≥–¥–∞ aggregate_test_function –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É:**

```python
# –®–∞–≥ 1: –û–±—ä—è—Å–Ω–∏—Ç—å –æ—à–∏–±–∫—É
error_info = aggregate_explain_error(error_message)

# –®–∞–≥ 2: –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å —Ñ–æ—Ä–º–∞—Ç–æ–º
if error_info.category == "function_format":
    # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å aggregate_build_expression
    correct = aggregate_build_expression(
        inputFields=[...],
        outputFields=[...],
        formula="–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞"
    )
    # –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é
    aggregate_create_function(
        inputFormat=correct.inputFormat,
        outputFormat=correct.outputFormat,
        expression=correct.expression
    )

# –®–∞–≥ 3: –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
if "Field not found" in error_message:
    fixed = aggregate_fix_function_parameters(
        path=path,
        functionName=name,
        errorMessage=error_message
    )
    # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
```

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è

### –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –∑–∞–¥–∞–Ω–∏—è:
- [ ] –ü–æ–Ω—è—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã (–º–æ–¥–µ–ª–∏, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —Ñ—É–Ω–∫—Ü–∏–∏, —Å–æ–±—ã—Ç–∏—è)
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –¥—Ä—É–≥–∏–µ –º–æ–¥–µ–ª–∏)

### –í–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
- [ ] –°–æ–∑–¥–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ (list_*)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—É—é —Ñ—É–Ω–∫—Ü–∏—é (test_function)
- [ ] –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–≤—è–∑–∫–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã)

### –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ list_*
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–≤—è–∑–∫–∏
- [ ] –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (—á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)

## üîß –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 1: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π inputFormat –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π

**–°–∏–º–ø—Ç–æ–º:** `Field 'b' not found in data record: a` –∏–ª–∏ `Field 'Float' not found in data record: Int`

**–ü—Ä–∏—á–∏–Ω–∞:** AggreGate –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–∞—Ä—Å–∏—Ç —Ñ–æ—Ä–º–∞—Ç `<value1><E><value2><E>` –±–µ–∑ `<<>>` –∏ —Ç–µ—Ä—è–µ—Ç –ø–æ–ª—è –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ.

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª–µ–π
function_details = aggregate_get_function(path, functionName)
if len(function_details.inputFields) < expected_field_count:
    # –ü—Ä–æ–±–ª–µ–º–∞: —Ñ–æ—Ä–º–∞—Ç –ø–æ—Ç–µ—Ä—è–ª –ø–æ–ª—è
    
    # –®–∞–≥ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç –° <<>> –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π
    # –ï—Å–ª–∏ –ø–æ–ª–µ–π –±–æ–ª—å—à–µ –æ–¥–Ω–æ–≥–æ - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <<>> —Å–∫–æ–±–∫–∏!
    if len(inputFields) > 1:
        inputFormat = f"<<{'>'.join([f'<{f['name']}><{f['type']}>' for f in inputFields])}>>"
        outputFormat = f"<<{'>'.join([f'<{f['name']}><{f['type']}>' for f in outputFields])}>>"
    else:
        # –î–ª—è –æ–¥–Ω–æ–≥–æ –ø–æ–ª—è - –±–µ–∑ <<>>
        inputFormat = f"<{inputFields[0]['name']}><{inputFields[0]['type']}>"
        outputFormat = f"<{outputFields[0]['name']}><{outputFields[0]['type']}>"
    
    # –®–∞–≥ 3: –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º
    aggregate_create_function(
        path=path,
        functionName=functionName,
        functionType=1,
        inputFormat=inputFormat,  # <<a><E><b><E>> –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π
        outputFormat=outputFormat,  # <<result><E>>
        expression=expression
    )
    
    # –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ aggregate_get_function
    # –®–∞–≥ 5: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ aggregate_call_function —Å DataTable —Ñ–æ—Ä–º–∞—Ç–æ–º
```

**–í–∞–∂–Ω–æ:** –î–ª—è —Ñ—É–Ω–∫—Ü–∏–π —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ø–æ–ª—è–º–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç `<<>>` –∏ –≤—ã–∑—ã–≤–∞–π—Ç–µ —á–µ—Ä–µ–∑ DataTable —Ñ–æ—Ä–º–∞—Ç!

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 2: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏–≤—è–∑–æ–∫

**–°–∏–º–ø—Ç–æ–º:** –ú–æ–¥–µ–ª—å –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–≤—è–∑–∫–∏
bindings = aggregate_get_variable(model_path, "bindings")
if not bindings or bindings.recordCount == 0:
    # –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–≤—è–∑–∫–∏
    aggregate_set_variable(
        path=model_path,
        name="bindings",
        value={
            "records": [{
                "target": ".:variableName",
                "expression": "{device_path:variableName}",
                "onevent": True
            }],
            "format": {
                "fields": [
                    {"name": "target", "type": "S"},
                    {"name": "expression", "type": "S"},
                    {"name": "onevent", "type": "B"}
                ]
            }
        }
    )
```

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 3: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∏–ø –º–æ–¥–µ–ª–∏

**–°–∏–º–ø—Ç–æ–º:** –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å –Ω–µ —Å–æ–∑–¥–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∏–ø –º–æ–¥–µ–ª–∏
child_info = aggregate_get_variable(model_path, "childInfo")
model_type = child_info.records[0].get("type", 0)
container_type = child_info.records[0].get("containerType", "objects")

# –ï—Å–ª–∏ –º–æ–¥–µ–ª—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–π, –Ω–æ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞:
if model_type != 1 or container_type != "devices":
    # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–∏–ø –º–æ–¥–µ–ª–∏
    aggregate_set_variable_field(
        path=model_path,
        variableName="childInfo",
        fieldName="containerType",
        value="devices"
    )
    aggregate_set_variable_field(
        path=model_path,
        variableName="childInfo",
        fieldName="objectType",
        value="device"
    )
    
    # –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≤—è–∑–∫–∏ –Ω–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏
    bindings = aggregate_get_variable(model_path, "bindings")
    if bindings and bindings.recordCount > 0:
        # –ó–∞–º–µ–Ω–∏—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø—É—Ç–∏ –Ω–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏
        for record in bindings.records:
            expression = record.get("expression", "")
            # –ó–∞–º–µ–Ω–∏—Ç—å {context:var} –Ω–∞ {.:var}
            if "{" in expression and ":" in expression:
                # –ò–∑–≤–ª–µ—á—å –∏–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∏ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
                # –ù–∞–ø—Ä–∏–º–µ—Ä: {users.admin.devices.virtualDevice:sine} -> {.:sine}
                import re
                new_expression = re.sub(r'\{[^:]+:(\w+)\}', r'{.:\1}', expression)
                record["expression"] = new_expression
        
        aggregate_set_variable(
            path=model_path,
            name="bindings",
            value=bindings
        )
```

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 4: –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

**–°–∏–º–ø—Ç–æ–º:** –§—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –≤—ã–∑—ã–≤–∞—Ç—å calculate() —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –Ω–æ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –î–ª—è –∑–∞–¥–∞–Ω–∏—è 7: —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –≤—ã–∑—ã–≤–∞—Ç—å calculate() –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
# –§—É–Ω–∫—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞: calculate(leftOperand, rightOperand, operation)

# –í Expression —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–¥–µ–ª–∏:
expression = '''
table("<<result><E>>", 
    callFunction("users.admin.devices.virtualDevice", "calculate",
        table("<<leftOperand><F><rightOperand><F><operation><S>>",
            {num1}, {num2}, "+"
        )
    ).result
)
'''

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏–≤—è–∑–∫–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
```

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –û—à–∏–±–∫–∞ 1: –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞, –Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–î–µ–π—Å—Ç–≤–∏–µ:** –í—Å–µ–≥–¥–∞ –≤—ã–∑—ã–≤–∞—Ç—å aggregate_test_function –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è
- **–ï—Å–ª–∏ –æ—à–∏–±–∫–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å aggregate_explain_error –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å

### –û—à–∏–±–∫–∞ 2: –ú–æ–¥–µ–ª—å –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- **–î–µ–π—Å—Ç–≤–∏–µ:** –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ –ø—Ä–∏–≤—è–∑–æ–∫
- **–ï—Å–ª–∏ –Ω–µ—Ç:** –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–≤—è–∑–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –û—à–∏–±–∫–∞ 3: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç Expression —Ñ—É–Ω–∫—Ü–∏–∏
- **–î–µ–π—Å—Ç–≤–∏–µ:** –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å aggregate_build_expression –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º
- **–ï—Å–ª–∏ –æ—à–∏–±–∫–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å aggregate_validate_expression –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
- **–ö–†–ò–¢–ò–ß–ù–û –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç –° `<<>>` —Å–∫–æ–±–∫–∞–º–∏!
  - –û–¥–Ω–æ –ø–æ–ª–µ: `<value><E>` (–±–µ–∑ <<>>)
  - –ù–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª–µ–π: `<<value1><E><value2><E>>` (—Å <<>>)
- **–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è:** –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —á–µ—Ä–µ–∑ `aggregate_get_function` - –µ—Å–ª–∏ –ø–æ–ª–µ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ –≤–º–µ—Å—Ç–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö, –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Å —Ñ–æ—Ä–º–∞—Ç–æ–º `<<>>`

### –û—à–∏–±–∫–∞ 4: Query —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –º–æ–¥–µ–ª—è—Ö –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
- **–î–µ–π—Å—Ç–≤–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Query —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
- **–ï—Å–ª–∏ –æ—à–∏–±–∫–∞:** –°–æ–∑–¥–∞—Ç—å –≤ –¥—Ä—É–≥–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Expression —Ñ—É–Ω–∫—Ü–∏–∏

### –û—à–∏–±–∫–∞ 5: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∏–ø –º–æ–¥–µ–ª–∏
- **–î–µ–π—Å—Ç–≤–∏–µ:** –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–æ–¥–µ–ª–∏ –≤—Å–µ–≥–¥–∞ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Ç–∏–ø (–∞–±—Å–æ–ª—é—Ç–Ω–∞—è/–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è/—ç–∫–∑–µ–º–ø–ª—è—Ä–Ω–∞—è)
- **–î–ª—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:**
  - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `containerType` –∏ `objectType` —á–µ—Ä–µ–∑ `aggregate_set_variable_field`
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ `{.:var}` –≤ –ø—Ä–∏–≤—è–∑–∫–∞—Ö (–Ω–µ –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø—É—Ç–∏!)
- **–ï—Å–ª–∏ –æ—à–∏–±–∫–∞:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ `aggregate_get_variable(path, "childInfo")` –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## üìä –û—Ç—á–µ—Ç–Ω–æ—Å—Ç—å

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç—á–µ—Ç:
```markdown
## –ó–∞–¥–∞–Ω–∏–µ X: [–ù–∞–∑–≤–∞–Ω–∏–µ]

### –°–æ–∑–¥–∞–Ω–æ:
- ‚úÖ –ú–æ–¥–µ–ª—å: path
- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: —Å–ø–∏—Å–æ–∫
- ‚úÖ –§—É–Ω–∫—Ü–∏–∏: —Å–ø–∏—Å–æ–∫ (–ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã)
- ‚úÖ –°–æ–±—ã—Ç–∏—è: —Å–ø–∏—Å–æ–∫
- ‚úÖ –ü—Ä–∏–≤—è–∑–∫–∏: —Å–æ–∑–¥–∞–Ω—ã/–Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è

### –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:
- ‚úÖ –§—É–Ω–∫—Ü–∏—è1: —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –§—É–Ω–∫—Ü–∏—è2: —É—Å–ø–µ—à–Ω–æ

### –¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
- ‚ö†Ô∏è XML —à–∞–±–ª–æ–Ω—ã –≤–∏–¥–∂–µ—Ç–æ–≤
- ‚ö†Ô∏è –ü—Ä–∞–≤–∏–ª–∞ (Rules) –¥–ª—è —Ç—Ä–µ–≤–æ–≥
- ‚ö†Ô∏è –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è

### –°—Ç–∞—Ç—É—Å: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç / ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏
```

## üéì –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

```python
# –®–∞–≥ 1: –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
built = aggregate_build_expression(
    inputFields=[
        {"name": "value1", "type": "E"},
        {"name": "value2", "type": "E"}
    ],
    outputFields=[{"name": "result", "type": "E"}],
    formula="({value1} + {value2}) / 2"
)

# –®–∞–≥ 2: –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å
validation = aggregate_validate_expression(
    inputFormat=built.inputFormat,
    outputFormat=built.outputFormat,
    expression=built.expression
)

if not validation.valid:
    # –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏
    pass

# –®–∞–≥ 3: –°–æ–∑–¥–∞—Ç—å
create_result = aggregate_create_function(
    path="users.admin.models.test",
    functionName="average",
    functionType=1,
    inputFormat=built.inputFormat,
    outputFormat=built.outputFormat,
    expression=built.expression
)

# –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ
functions = aggregate_list_functions("users.admin.models.test")
if "average" not in [f['name'] for f in functions]:
    raise Error("–§—É–Ω–∫—Ü–∏—è –Ω–µ —Å–æ–∑–¥–∞–Ω–∞")

# –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å inputFormat —á–µ—Ä–µ–∑ aggregate_get_function
function_check = aggregate_get_function(path, "average")
if len(function_check.inputFields) < 2:
    # –ü—Ä–æ–±–ª–µ–º–∞: —Ñ–æ—Ä–º–∞—Ç –ø–æ—Ç–µ—Ä—è–ª –ø–æ–ª—è - –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Å <<>>
    aggregate_create_function(
        path=path,
        functionName="average",
        functionType=1,
        inputFormat="<<value1><E><value2><E>>",  # –° <<>> –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π
        outputFormat="<<result><E>>",
        expression=built.expression
    )

# –®–∞–≥ 6: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
# –î–ª—è —Ñ—É–Ω–∫—Ü–∏–π —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ø–æ–ª—è–º–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ aggregate_call_function —Å DataTable
if len(function_check.inputFields) > 1:
    test_result = aggregate_call_function(
        path="users.admin.models.test",
        functionName="average",
        parameters={
            "records": [{"value1": 10, "value2": 20}],
            "format": {
                "fields": [
                    {"name": "value1", "type": "E"},
                    {"name": "value2", "type": "E"}
                ]
            }
        }
    )
else:
    test_result = aggregate_test_function(
        path="users.admin.models.test",
        functionName="average",
        parameters={"value1": 10, "value2": 20}
    )

if not test_result.success or (hasattr(test_result, 'error') and test_result.error):
    # –ò—Å–ø—Ä–∞–≤–∏—Ç—å
    error_info = aggregate_explain_error(test_result.error if hasattr(test_result, 'error') else "Test failed")
    # ... –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
    # –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Ç–µ—Å—Ç

# –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ - –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å
```

### –ü—Ä–∏–º–µ—Ä 2: –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ —Å –ø—Ä–∏–≤—è–∑–∫–∞–º–∏

```python
# –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å
model_path = "users.admin.models.alarm_model"
aggregate_create_context(
    parentPath="users.admin.models",
    name="alarm_model"
)

# –®–∞–≥ 2: –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
aggregate_create_variable(
    path=model_path,
    variableName="deviceValue",
    format="<value><E>"
)

# –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ
variables = aggregate_list_variables(model_path)
assert "deviceValue" in [v['name'] for v in variables]

# –®–∞–≥ 4: –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–≤—è–∑–∫–∏ –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É
device_path = "users.admin.devices.virtualDevice"
aggregate_set_variable(
    path=model_path,
    name="bindings",
    value={
        "records": [{
            "target": ".:deviceValue",
            "expression": f"{{{device_path}:sine}}",
            "onevent": True
        }],
        "format": {
            "fields": [
                {"name": "target", "type": "S"},
                {"name": "expression", "type": "S"},
                {"name": "onevent", "type": "B"}
            ]
        }
    }
)

# –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–≤—è–∑–∫–∏
bindings = aggregate_get_variable(model_path, "bindings")
assert bindings.recordCount > 0
```

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫-–ª–∏—Å—Ç –¥–ª—è –ò–ò

–ü–µ—Ä–µ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º —Ä–∞–±–æ—Ç—ã –Ω–∞–¥ –∑–∞–¥–∞–Ω–∏–µ–º:

1. [ ] –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω—ã
2. [ ] –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã (list_*)
3. [ ] –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã (test_function –∏–ª–∏ call_function –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π)
4. [ ] **–ö–†–ò–¢–ò–ß–ù–û:** –ü—Ä–æ–≤–µ—Ä–µ–Ω inputFormat —á–µ—Ä–µ–∑ aggregate_get_function - –≤—Å–µ –ø–æ–ª—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
5. [ ] –ï—Å–ª–∏ –ø–æ–ª—è –ø–æ—Ç–µ—Ä—è–Ω—ã - –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è —Å —Ñ–æ—Ä–º–∞—Ç–æ–º `<<>>` –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π
6. [ ] –í—Å–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
7. [ ] –ü—Ä–∏–≤—è–∑–∫–∏ —Å–æ–∑–¥–∞–Ω—ã (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã)
8. [ ] –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
9. [ ] –°–æ–∑–¥–∞–Ω –æ—Ç—á–µ—Ç –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏

**–¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –ø—É–Ω–∫—Ç–æ–≤ - –∑–∞–¥–∞–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º!**

## üîß –ü—Ä–∞–≤–∏–ª–æ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π (–ö–†–ò–¢–ò–ß–ù–û!)

**–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–∏ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –≤—Ö–æ–¥–Ω—ã–º–∏ –ø–æ–ª—è–º–∏:**

1. **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª–µ–π:**
   - –ï—Å–ª–∏ –ø–æ–ª–µ–π > 1 ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç –° `<<>>`
   - –ï—Å–ª–∏ –ø–æ–ª–µ = 1 ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç –ë–ï–ó `<<>>`

2. **–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
   ```python
   func = aggregate_get_function(path, functionName)
   if len(func.inputFields) < expected_field_count:
       # –ü–†–û–ë–õ–ï–ú–ê: –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Å <<>>
   ```

3. **–ü—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏:**
   - –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–ª—è ‚Üí `aggregate_call_function` —Å DataTable —Ñ–æ—Ä–º–∞—Ç–æ–º
   - –û–¥–Ω–æ –ø–æ–ª–µ ‚Üí `aggregate_test_function` —Å –ø—Ä–æ—Å—Ç—ã–º –æ–±—ä–µ–∫—Ç–æ–º
